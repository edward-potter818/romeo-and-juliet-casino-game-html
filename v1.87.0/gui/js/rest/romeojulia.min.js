function SlotMachine(e){function z(e,t){var n=function(){t(),e.bonusSymbol>=6&&e.bonusSymbol<=9&&$(".headlineContainer").addClass("fourLine"),$("#bookBGLayer").remove()},s=r.getCachedImg("fgSymbolSmall"+e.bonusSymbol);$(".headlineContainer").addClass("plain").append('<div class="fgBonusSymbol"><img src="'+s.src+'" alt="" /></div>'),l.sendRequest("getFGPayTable",{bonus:e.bonusSymbol});var u=$("#freegame_container");if(P)setTimeout(function(){u.html('<div id="bookBGLayer" class="hidden"></div><div id="bookEndPict"></div><div id="bookAnimLayer"></div>'),$("#bookBGLayer").fadeIn("fast","linear"),a.addStartHypeListener(D,n);var t={1:"Sym_10",2:"Sym_J",3:"Sym_Q",4:"Sym_K",5:"Sym_A",6:"Sym_Letter",7:"Sym_Dagger",8:"Sym_Romeo",9:"Sym_Julia"};i.start(t[e.bonusSymbol],D)},300);else{u.html('<div id="bookBGLayer" class="hidden"></div><div class="hidden" id="bookPictLayer"></div>'),$("#bookBGLayer").fadeIn("fast","linear");var f=$("#bookPictLayer"),c=r.getCachedImg("bookPicture");f.css({"background-image":"url("+c.src+")"}),f.fadeIn("slow",function(){f.append('<div class="hidden" id="chosenBonusSymbol"></div>');var t=$("#chosenBonusSymbol");c=r.getCachedImg(q.bonus[e.bonusSymbol]),t.css({"background-image":"url("+c.src+")","background-size":"contain"}),o.play({playwhat:"bookResult",soundLine:"fg1"}),t.fadeIn(2e3,function(){n(),f.remove(),t.remove()})})}}function W(){i=new HypeManager({}),$("#loading .progress").html("100%"),$("#loading .state").show(),obj_restHandler.requestInit()}function X(e){obj_restHandler.processResponse(e);if(typeof e.initData!="undefined"){typeof e.initData.reeltiming=="string"&&(g=e.initData.reeltiming),obj_restHandler.onSoundLoaded(e.initData.sound),u=new WinLines({cache:r,devConf:t,slotConf:n,animManager:c,bigSymbol:"/scatter_small.png"}),a=new FreeGame({conf:n,devConf:t,sound:o,hype:i,getReelIdx:u.getReelIdx,scatter:10,animBG:"scatterBonus",animFG:"scatterBonus",renderFreegameSign:V,startPauseCallback:z,spinAfterIntro:function(){obj_console.clickButton("spin",{noSound:!0})},animManager:c,lang:O}),f=new ReelEngine({sound:o,cache:r,conf:t,animManager:c,finishListener:!0,container:"reel_hype_container",size:{w:n.size("sW"),h:n.size("sH")},reelSpace:n.size("sp"),scatter:["/symbol-scatter.png","/symbol-m-scatter.png"],scatterParams:{h:n.size("scH")+"px",m:n.size("scO")+"px"},speed:n.speed(g),rows:n.rows(),symbols:["/symbol-10.jpg","/symbol-j.jpg","/symbol-q.jpg","/symbol-k.jpg","/symbol-a.jpg","/symbol-letter.jpg","/symbol-dagger.jpg","/symbol-romeo.jpg","/symbol-julia.jpg","/symbol-scatter.png","/symbol-fg-10.jpg","/symbol-fg-j.jpg","/symbol-fg-q.jpg","/symbol-fg-k.jpg","/symbol-fg-a.jpg","/symbol-fg-letter.jpg","/symbol-fg-dagger.jpg","/symbol-fg-romeo.jpg","/symbol-julia.jpg","/symbol-scatter.png","/symbol-s-10.jpg","/symbol-s-j.jpg","/symbol-s-q.jpg","/symbol-s-k.jpg","/symbol-s-a.jpg","/symbol-s-letter.jpg","/symbol-s-dagger.jpg","/symbol-s-romeo.jpg","/symbol-s-julia.jpg","/symbol-m-10.jpg","/symbol-m-10.jpg","/symbol-m-j.jpg","/symbol-m-q.jpg","/symbol-m-k.jpg","/symbol-m-a.jpg","/symbol-m-letter.jpg","/symbol-m-dagger.jpg","/symbol-m-romeo.jpg","/symbol-m-julia.jpg","/symbol-m-scatter.png"],fakeReels:R,fakeReelSymbols:q,fakeCriticalSymbols:U}),f.init(),obj_anim=new SlotMachineAnim({hype:i,sound:o,cache:r,conf:n,devConf:t,winLines:u,reelEngine:f,animManager:c,freeGame:a,winanim:m,linepings:!0,stamping:!0,ambienteSound:!1,scatterForFreeGames:10,symbolTeaserAnim:!0,symbolTeaserReels:[!0,!0,!0,!0,!0],animations:d,optimalSlotAnimations:H,optimalSlotBigAnimData:{scatterWild:{h:n.size("scH")+"px",o:n.size("scO")+"px"}},symbols:q,stampAnims:{1:"sTen",2:"sJack",3:"sQueen",4:"sKing",5:"sAce",6:"sLetter",7:"sDagger",8:"sRomeo",9:"sJulia"},ownFunctions:{ofge:function(e){var t=r.getCachedImg("fgSymbolSmall"+e);$(".headlineContainer").append('<div class="fgBonusSymbol"><img src="'+t.src+'" alt="" /></div>'),e>=6&&e<=9&&$(".headlineContainer").addClass("fourLine"),l.sendRequest("getFGPayTable",{bonus:e})},spfg:function(e){var t=displayMoney(e.win);$(".headlineContainer").addClass("plain").removeClass("fourLine"),$("#freegame_container").hide().addClass("outro").html('<div id="freegamePoints">'+t+"</div>");var n=function(){o.getActiveSound("fg2")==="fgEnd"&&o.stop("fg2"),e.changeSymbols(),$("#freegame_container").hide().html("").removeClass("outro"),$(".headlineContainer").removeClass("plain"),$(".headlineContainer .fgBonusSymbol").remove(),$(".headlineContainer .fgPayTable").remove(),e.onFinished()};e.onStart(n);var r=function(){$("#freegame_container").fadeIn("normal"),o.play({playwhat:"fgEnd",callback:n})};V("outro",r)},gbp:function(e){if(e.winLine){var t={},n=u.getPosition(e.winLine,e.reel)+1;if(e.frp[n-1]==10)return e.frp[n+1]==10?(t[e.reel+1]=r.getCachedImg("symBlendTopBottom"),t):(t[e.reel+1]=r.getCachedImg("symBlendTop"),t);if(e.frp[n+1]==10)return t[e.reel+1]=r.getCachedImg("symBlendBottom"),t}return!1}}}),obj_restHandler.enableManualReels({halfsize:t.mode("r"),rows:n.rows(),reelSymbols:q,anim:obj_anim,reelEngine:f}),obj_console=new OnlineConsole({devConf:t,sound:o,animManager:c,onMoneySet:obj_restHandler.onMoneySet,spacebarActivated:e.initData.spaceBar,quickSpin:e.initData.quickSpin,leftHandMode:e.initData.leftHandMode,featureCountdown:e.initData.featureCountdown,requestSender:l.sendRequest,featureCountdownType:"freegame",bottomNotClickable:!t.isBottomAreaClickable(),alwaysShowVersionAndSlotname:T,numInputTypeForMobile:t.getNumericInputTypeForMobile()}),obj_slotmachineController=new SlotmachineController({requestSender:l.sendRequest,console:obj_console,anim:obj_anim,sound:o,loader:r,devConf:t,animManager:c,restHandler:obj_restHandler,layout169:v,hasPauseInFreegameIntro:!0,requestFGBonusSymbol:!0,ambienteSound:!1,rulesURL:b,rulesJSLoader:w,loadRulesInClient:E,onPending:S,reeltiming:g,startFullScreen:j,stopFullScreen:F,enabledFullScreen:I,hasBetChangeLoops:N,startGameRound:L,finishGameRound:A,useFakeReels:!0}),obj_restHandler.addCallbacks({deactivateAutoSpin:obj_console.stopAutospin,setLineBets:function(e){obj_slotmachineController.display([{type:"possLinebets",value:e}])},abortWinAnim:function(){obj_console.clickButton("abortwinanim")},getState:obj_console.getState,pauseSlot:obj_slotmachineController.pauseSlot,resumeSlot:obj_slotmachineController.resumeSlot,afterFreeRoundsIntro:obj_slotmachineController.onFreeRoundsIntroClose,ignoreUserInput:obj_console.ignoreUserInput});var s=function(){obj_slotmachineController.init(e.initData),u.onInitialized({attention:e.initData.attentionSpin}),obj_restHandler.onSMReady(),x&&x()},p=2,y=t.useCoinShowers()?p:--p;y=P?p:--p,y?(i.addListener({type:i.onDocumentLoaded,callback:function(){h++,h==y&&(i.onInitialized(),s())}}),t.useCoinShowers()&&i.load({name:m}),P&&i.load({name:D})):s()}typeof e.display!="undefined"&&obj_slotmachineController&&obj_slotmachineController.display(e.display);if(typeof e.fgPayTable!="undefined"&&e.fgPayTable){$(".headlineContainer").append(e.fgPayTable);var C=t.mode("r")==0?2:1,k=$(".fgPayTable").width(),M=.73*k,_=1,B=C*8.5,W=1.25*B;$(".fgPayTable .fgWinValue").each(function(){var e=$(this),t=e.attr("id"),n=t.split("-")[1],r=$.trim(e.text());e.html("");var i=Raphael(t,k,W),s={"text-anchor":"start","font-size":B};J(i.text("0%","80%",obj_lang["game_paytable_mult"+n]).attr(s),C);var o={"text-anchor":"end","font-family":'"Noto Serif", "Times New Roman", serif',"font-size":_*B,"font-weight":"bold",fill:"white"},u=i.text("100%","81%",r).attr(o),a=u.getBBox().width;if(a>M){var f=M/a;f<_&&(_=f),u.attr("font-size",_*B)}})}}function V(e,n){$("#freegame_container").append('<div class="'+e+'" id="fgRenderBox"></div>');var r=t.mode("r")==0,i=r?2:1,s=obj_lang["game_romeoJulia_fg-"+e],o=$("#freegame_container #fgRenderBox").width(),u=1,a=i*36;$("#freegame_container").css({visibility:"hidden",display:"block"}),$("#freegame_container").append('<div id="checkTextSize"></div>'),$("#freegame_container #checkTextSize").css({position:"absolute",color:"transparent","font-family":'"Noto Serif", "Times New Roman", serif',"font-size":a+"px"});for(var f in s){$("#checkTextSize").html(s[f]);var l=$("#checkTextSize").width();if(l>o){var c=o/l;c<u&&(u=c)}}u<1&&(u*=.95),$("#checkTextSize").remove(),$("#freegame_container").css({visibility:"",display:"none"});var h=Raphael("fgRenderBox","100%","100%"),p={intro:[{x:"50%",y:i*56},{x:"50%",y:i*75},{x:"50%",y:i*94}],retrigger:[{x:"50%",y:i*53.5},{x:"50%",y:i*72.5},{x:"50%",y:i*92.5}],outro:[{x:"50%",y:i*62}]};for(var f in s){var d={"font-size":parseInt(u*a),"text-anchor":"middle"};K(h.text(p[e][f].x,p[e][f].y,s[f]).attr(d),i)}typeof n=="function"&&n()}function J(e,t){var n={"font-family":'"Noto Serif", "Times New Roman", serif',"font-weight":"bold",fill:"0-#8C4312-#DE992F:20-#E9C37B:50-#DE992F:80-#8C4312"};e.attr(n).stroke({color:"#000000",opacity:1,width:.5*t}).dropShadow({angle:60,distance:1*t,width:.8*t,blur:1,opacity:.6})}function K(e,t){var n={"font-family":'"Noto Serif", "Times New Roman", serif',"font-weight":"bold","font-style":"italic",fill:"90-#000000-#000000:25-#ff0000:82-#ff0000"};e.attr(n).stroke({color:"#000000",opacity:1,width:.5*t}).dropShadow({angle:60,distance:2*t,width:.8*t,blur:1,opacity:1,color:"#6B2706"}).dropShadow({angle:60,distance:1*t,blur:1,opacity:1,color:"#FCD48A"})}var t,n,r,i,s,o,u,a,f,l,c,h=0,p=!1,d=null,v=!1,m="winanim",g="normal",y=!1,b=!1,w=null,E=!1,S=null,x=null,T=!1,N=!0,C=!1,k=!1,L=null,A=null,O="en",M=null,_=["scatterTitle","wildTitle","wildText1","wildText2"],D="brjfreegame",P=!0,H=["scatterWild"],B=!1,j=null,F=null,I=null,q={base:{1:"/symbol-10.jpg",2:"/symbol-j.jpg",3:"/symbol-q.jpg",4:"/symbol-k.jpg",5:"/symbol-a.jpg",6:"/symbol-letter.jpg",7:"/symbol-dagger.jpg",8:"/symbol-romeo.jpg",9:"/symbol-julia.jpg",10:"/symbol-scatter.png",winLines:{10:"/scatter_small.png"}},free:{1:"/symbol-fg-10.jpg",2:"/symbol-fg-j.jpg",3:"/symbol-fg-q.jpg",4:"/symbol-fg-k.jpg",5:"/symbol-fg-a.jpg",6:"/symbol-fg-letter.jpg",7:"/symbol-fg-dagger.jpg",8:"/symbol-fg-romeo.jpg",9:"/symbol-julia.jpg",10:"/symbol-scatter.png",winLines:{10:"/scatter_small.png"}},bonus:{1:"/symbol-s-10.jpg",2:"/symbol-s-j.jpg",3:"/symbol-s-q.jpg",4:"/symbol-s-k.jpg",5:"/symbol-s-a.jpg",6:"/symbol-s-letter.jpg",7:"/symbol-s-dagger.jpg",8:"/symbol-s-romeo.jpg",9:"/symbol-s-julia.jpg"},monochrome:{1:"/symbol-m-10.jpg",2:"/symbol-m-j.jpg",3:"/symbol-m-q.jpg",4:"/symbol-m-k.jpg",5:"/symbol-m-a.jpg",6:"/symbol-m-letter.jpg",7:"/symbol-m-dagger.jpg",8:"/symbol-m-romeo.jpg",9:"/symbol-m-julia.jpg",10:"/symbol-m-scatter.png"}},R={base:{a:[2,3,6,4,2,7,3,5,9,4,5,6,3,4,7,2,5,7,4,5,1,10,5,2,3,4,8,1,4,7,3,1,4,2,7,3,4,5,2,8,4,3,7,5,3,1,5,9,3],b:[4,6,1,2,4,7,1,4,9,3,2,5,2,4,1,9,4,1,3,5,1,7,4,1,2,6,3,2,10,5,1,2,4,6,3,8,5,2,4,6,1,8,2,4,1,8],c:[2,1,7,4,5,9,2,1,8,5,3,2,5,10,1,2,3,6,5,3,1,8,5,1,4,8,1,3,2,1,6,2,1,7,4,6,1,3,9,2,5,3,7,4,3,8],d:[3,2,10,1,4,9,5,3,6,1,2,5,4,7,3,5,4,2,8,5,3,9,1,3,7,1,3,7,2,4,10,3,5,7,4,8,4,6,1,2,5,7,1,5,8,3,2,1,4,6],e:[7,3,8,2,9,3,1,7,3,6,1,2,8,3,7,5,1,10,3,2,7,3,5,7,4,3,2,1,6,4,1,2,10,4,2,8,5,4,5,6,4,2,9,5,4,6,5]},free:{a:[3,7,4,5,2,9,3,4,7,1,5,7,1,4,8,3,1,10,4,2,8,4,3,5,2,8,1,10,5,2,3,6,2,3,5,2,9,4,5,6,3,5,2,8,1,10,5,2,3,6,5,7,4,5,2,9,3,4,4,8,3,1,10,4,2,8,4,5,2,9,4,5,6],b:[8,2,5,1,2,3,10,5,1,6,2,3,6,2,10,4,3,7,4,5,1,6,2,3,9,2,5,4,7,5,2,3,1,8,2,4,5,1,3,6,1,3,9,2,5,4,7,5,2,3,1,5,3,1,2,3,10,5,1,6,4,5,1,7,3,4,6,1,2,5,10,4,3],c:[1,5,10,3,4,1,5,7,4,2,5,8,2,5,8,3,1,9,4,2,8,4,1,3,4,2,8,3,7,5,3,9,1,3,4,10,2,5,1,2,4,6,2,5,10,1,4,3,7,5,3,9,4,3,7,4,5,1,6,2,4,5,1,3,6,1,2,3],d:[4,6,3,2,9,5,3,6,4,1,3,7,3,6,4,8,3,1,10,4,1,7,4,5,6,3,2,10,1,4,7,5,1,4,7,3,6,2,1,9,2,5,7,3,2,10,1,4,6,5,1,3,2,9,5,3,6,4,1,4,8,3,1,10,4,1,7,4,3,6,2,1,9,2],e:[1,2,7,4,9,1,7,3,6,5,8,4,7,4,9,5,3,7,2,5,9,2,1,8,2,10,4,6,1,8,3,7,5,8,1,9,3,6,4,8,5,10,3,4,7,2,5,9,2,1,8,2,10,4,6]}},U=[9,10];this.onShutdown=function(){obj_restHandler.onCloseGame()},function(e){p=e.resolution,d=e.animationData,v=e.layout169,b=e.rulesURL,w=e.rulesJSLoader,typeof e.loadRulesInClient!="undefined"&&(E=e.loadRulesInClient),typeof e.onPending=="function"&&(S=e.onPending),typeof e.onLoaded=="function"&&(x=e.onLoaded),typeof e.lang!="undefined"&&(O=e.lang),typeof e.enforceVersion!="undefined"&&(T=e.enforceVersion),typeof e.hasBetChangeLoops!="undefined"&&(N=e.hasBetChangeLoops),typeof e.showExtraJackpotBet!="undefined"&&(C=e.showExtraJackpotBet),typeof e.showInfoDuringJackpotChance!="undefined"&&(k=e.showInfoDuringJackpotChance),typeof e.startGameRound=="function"&&(L=e.startGameRound),typeof e.finishGameRound=="function"&&(A=e.finishGameRound),typeof e.startFullScreen=="function"&&(j=e.startFullScreen),typeof e.stopFullScreen=="function"&&(F=e.stopFullScreen),typeof e.enabledFullScreen=="function"&&(I=e.enabledFullScreen),t=new DeviceConfig({mode:e.mode}),typeof e.supressAutoFullscreen!="undefined"&&e.supressAutoFullscreen&&t.supressAutoFullscreenDetection(),n=new SlotConfig({devConfig:t,machine:"romeojulia"}),y=t.useSmallSounds(),m=e.winanim+(t.useCoinShowers()==="optimal"?"opt":""),P=t.playSymbolAnims();var i=typeof e.winLines!="undefined"&&e.winLines?e.winLines:10;typeof e.reeltiming!="undefined"&&(g=e.reeltiming);var s=i==5?"RomeoJulia5":"RomeoJulia";t.mode("r")==1&&(D="brjoptfreegame"),c=new AnimManager,l=new Communicator({slotmachine:s,responseHandler:X,slotConf:n,lablerEventManager:typeof e.lablerEventManager!="undefined"?e.lablerEventManager:!1}),obj_restHandler=new SMRestHandler({requestSender:l.sendRequest,isSoundSettable:e.isSoundSettable,clock:typeof e.showClock=="undefined"?!1:e.showClock,version:typeof e.showVersion=="undefined"?!1:e.showVersion,name:"BOOK OF ROMEO & JULIA",warnBrowser:t.showBrowserWarning(),onFatalError:typeof e.onFatalError=="undefined"?!1:e.onFatalError,lablerEventManager:typeof e.lablerEventManager!="undefined"?e.lablerEventManager:!1}),r=new GameLoader({height:n.size("h"),width:n.size("w"),devConf:t,restHandler:obj_restHandler,baseURL:typeof e.baseURL=="undefined"?"":e.baseURL}),obj_restHandler.isResizable()&&r.autofit();var u=obj_restHandler.getSoundFiles(e.soundFiles,y),a=0;for(var f in u)++a;r.preload({pictures:getPreloadImages(t,n,i,e.lang),onUpdate:typeof e.preload=="function"?e.preload:obj_restHandler.onPreloaderUpdate,onLoaded:W,additionalCounter:a,lang:e.lang,resol:p}),o=obj_restHandler.loadSoundManager({soundVersions:t.getSoundVersions(),soundFiles:u,smallSounds:y,soundFileVersion:e.soundFileVersion,onProgress:r.onExternProgress}),hype_playBBBookResultSound=function(){o.play({soundLine:"fg1",playwhat:"bookResult"})},hype_playBBBookOpenSound=function(){o.play({soundLine:"fg1",playwhat:"bookOpen"})},hype_playBBSymbolAppersSound=function(){o.play({playwhat:"book"})}}(e)}var obj_restHandler,obj_anim,obj_console,obj_slotmachineController;